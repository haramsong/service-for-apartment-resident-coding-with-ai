# 회원가입 페이지 Dialog 컴포넌트 분리 리팩토링

_작성일: 2025-11-04_

_작성자: Developer Agent_

## 문제 상황

회원가입 페이지(`src/app/auth/signup/page.tsx`)의 아파트 선택 Dialog 코드가 약 100줄 이상으로 길어져 가독성이 떨어지는 문제가 발생했습니다.

### 기존 코드 문제점
- 단일 파일에 모든 로직이 집중됨 (약 400줄)
- Dialog 관련 상태 관리가 메인 컴포넌트에 혼재
- 아파트 검색 로직이 회원가입 로직과 섞여 있음
- 재사용 불가능한 구조

## 해결 방법

### 1. 컴포넌트 분리
`ApartmentSelectDialog` 컴포넌트를 별도 파일로 분리:
- 경로: `src/components/auth/ApartmentSelectDialog.tsx`
- 독립적인 상태 관리 (isOpen, searchQuery)
- Props를 통한 데이터 전달

### 2. 책임 분리
**ApartmentSelectDialog 컴포넌트 책임:**
- 아파트 목록 조회 (tRPC)
- 검색 필터링
- Dialog 상태 관리
- 선택된 아파트 표시

**SignUpPage 컴포넌트 책임:**
- 회원가입 폼 전체 관리
- 유효성 검증
- 회원가입 API 호출

### 3. 인터페이스 설계
```typescript
interface ApartmentSelectDialogProps {
  selectedApartmentId: string;
  onSelect: (apartmentId: string) => void;
  error?: string;
}
```

## 개선 효과

### 코드 품질
- 회원가입 페이지 코드 약 100줄 감소
- 단일 책임 원칙(SRP) 준수
- 컴포넌트 재사용 가능

### 가독성
- 각 컴포넌트의 역할이 명확해짐
- 코드 이해가 쉬워짐
- 유지보수성 향상

### 확장성
- 다른 페이지에서도 아파트 선택 기능 재사용 가능
- 독립적인 테스트 가능
- 기능 추가/수정이 용이

## 예방 방법

### 컴포넌트 분리 기준
1. **100줄 이상**: 분리 검토
2. **독립적 기능**: 별도 컴포넌트로 분리
3. **재사용 가능성**: 공통 컴포넌트로 추출
4. **상태 관리**: 독립적인 상태가 3개 이상이면 분리 고려

### 파일 구조 원칙
```
components/
├── ui/           # 범용 UI 컴포넌트
├── auth/         # 인증 관련 컴포넌트
├── layout/       # 레이아웃 컴포넌트
└── features/     # 기능별 컴포넌트
```

### 코드 리뷰 체크리스트
- [ ] 컴포넌트가 200줄 이하인가?
- [ ] 단일 책임 원칙을 준수하는가?
- [ ] 재사용 가능한 구조인가?
- [ ] Props 인터페이스가 명확한가?

## 참고사항

이번 리팩토링은 기능 변경 없이 구조만 개선한 것으로, 사용자 경험에는 영향이 없습니다. 향후 비슷한 패턴의 Dialog가 필요할 경우 이 컴포넌트를 참고하여 구현할 수 있습니다.
